<div class="ui-container">
    <div class="ui-row">
        <!-- BUILDING -->
        <mat-form-field class="a" matTooltip="{{S.UITips['bldg_list']}}" [matTooltipShowDelay]=S.Slow [matTooltipPosition]="S.positions['left']">
            <mat-label>Building</mat-label>
            <mat-select matInput [(ngModel)]="building " (selectionChange)="getRoomList()">
                <mat-option *ngFor="let b of buildingList " [value]="b ">{{b._id}} ({{b.name}})</mat-option>
            </mat-select>
        </mat-form-field>
        <!-- ROOM -->
        <mat-form-field class="a" *ngIf="building._id != null && roomList.length > 0" matTooltip="{{S.UITips['room_list']}}" [matTooltipShowDelay]=S.Slow [matTooltipPosition]="S.positions['left']">
            <mat-label>Room</mat-label>
            <mat-select matInput [(ngModel)]="room" (selectionChange)="getUIConfig();">
                <mat-option *ngFor="let r of roomList" [value]="r">{{r._id}}</mat-option>
            </mat-select>
        </mat-form-field>
    </div>

    <div class="ui-row" *ngIf="room._id != null && !configExists">
        <label style="padding-bottom: 25px;">Which template for this room?</label>
        <mat-form-field class="template">
            <mat-label>Template</mat-label>
            <mat-select matInput [(ngModel)]="currentTemplate" (ngModelChange)="UpdatePanels()">
                <mat-option *ngFor="let t of templateList" [value]="t">{{t._id}} ({{t.description}})</mat-option>
                <mat-option [value]="customTemplate">Custom</mat-option>
            </mat-select>
        </mat-form-field>
    </div>
    <mat-accordion>
        <mat-expansion-panel *ngFor="let p of config.panels; let i = index;" [expanded]="panelStep === i" (opened)="setStep(i)">
            <mat-expansion-panel-header>
                <mat-panel-title>{{p.hostname}}</mat-panel-title>
                <mat-panel-description>Preset: {{p.preset}} UIPath: {{p.uipath}}</mat-panel-description>
            </mat-expansion-panel-header>
            <div class="ui-row">
                <mat-form-field class="a">
                    <mat-label>Panel Display Name</mat-label>
                    <input matInput type="text" [(ngModel)]="p.preset">
                </mat-form-field>
                <mat-form-field class="a">
                    <mat-label>UI Path</mat-label>
                    <mat-select matInput [(ngModel)]="p.uipath">
                        <mat-option [value]="'/blueberry'">{{S.UIPaths['/blueberry']}}</mat-option>
                        <mat-option [value]="'/cherry'">{{S.UIPaths['/cherry']}}</mat-option>
                    </mat-select>
                </mat-form-field>
            </div>

            <div class="ui-row">
                <ng-container *ngFor="let d of displays">
                    <mat-checkbox [checked]="GetPreset(p.preset).displays.includes(d.name)" (change)="UpdatePresetDisplays(GetPreset(p.preset), d.name, $event.checked);">
                        {{d.name}}
                    </mat-checkbox>
                    <button mat-icon-button><mat-icon>{{d.icon}}</mat-icon></button>
                </ng-container>
            </div>

            <mat-action-row *ngIf="i === 0 && panels.length != 1">
                <button mat-button color="primary" (click)="nextStep()">Next</button>
            </mat-action-row>
            <mat-action-row *ngIf="i > 0 && i < panels.length-1 && panels.length != 1">
                <button mat-button color="warn" (click)="prevStep()">Previous</button>
                <button mat-button color="primary" (click)="nextStep()">Next</button>
            </mat-action-row>
            <mat-action-row *ngIf="i === panels.length-1 && panels.length != 1">
                <button mat-button color="warn" (click)="prevStep()">Previous</button>
                <button mat-button color="primary" (click)="nextStep()">End</button>
            </mat-action-row>
        </mat-expansion-panel>
    </mat-accordion>
</div>